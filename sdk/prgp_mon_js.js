!function(){function e(){i(),l=setInterval(i,b)}function t(){void 0!==l&&clearInterval(l)}function n(e,t){e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var n=new RegExp("[\\?&]"+e+"=([^&#]*)"),i=n.exec(t);return null===i?"":decodeURIComponent(i[1].replace(/\+/g," "))}function i(){var e=document.getElementById("mainframe");y&&r(e)&&(null!==e?(d.parentNode.removeChild(e),d.parentNode.insertBefore(g,d)):d.parentNode.insertBefore(g,d))}function r(e){var t=parseInt(e.offsetTop),n=parseInt(e.height),i=parseInt(window.scrollY),r=parseInt(window.screen.availHeight),a=Math.floor(n/2),o=t+n-a-i>=0,s=i+r-t-a>=0;return o&&s}function a(){y=!0,void 0!==l&&e()}function o(){void 0!==l&&t(),y=!1}function s(e){var t=" "+document.cookie,n=t.indexOf(" "+e+"=");if(-1==n&&(n=t.indexOf(";"+e+"=")),-1==n||""==e)return"";var i=t.indexOf(";",n+1);return-1==i&&(i=t.length),unescape(t.substring(n+e.length+2,i))}function c(){if(E&&(f=s("pg"))){var e=document.createElement("img");e.type="text/javascript",e.src="http://ib.adnxs.com/getuid?http://sync.personagraph.com:8090//pixel?pg_uuid="+f+"&adnxs_uid=$UID",document.body.appendChild(e)}}function p(){g.src="http://ib.adnxs.com/tt?id="+w+"&size="+v+"&cb="+h,g.async=!0,g.id="mainframe",g.height=v.substring(v.indexOf("x")+1,v.length),g.width=v.substring(0,v.indexOf("x")),g.scrolling="no",g.style.display="block",g.style.margin="auto",g.allowtransparency="true",1==x&&(g.style.position="fixed",g.style.bottom="1px",g.style.width="100%"),u=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP"),u.onreadystatechange=function(){if(4==u.readyState&&200==u.status){var t=JSON.parse(u.response);if(t.settings&&t.settings[0]){var n=t.settings[0][w];1==n&&(b=void 0==t.settings[0].refreshRate?b:1e3*t.settings[0].refreshRate,d.parentNode.insertBefore(g,d),e())}}},u.open("GET","http://an.pgm.personagraph.com/api/v1/appevent/placement?placementId="+w),u.send()}var u,l,f,g=document.createElement("iframe"),m=document.getElementById("pgmad-inside"),h=(m.src.substring(m.src.lastIndexOf("?")+1),Math.floor(1e3*Math.random()*1e3*1e3)),v=n("s",m.src),w=n("id",m.src),x=n("f",m.src),y=!0,b=12e4,E=!0;window.addEventListener?(window.addEventListener("focus",a,!1),window.addEventListener("blur",o,!1)):window.attachEvent&&(window.attachEvent("onfocus",a),window.attachEvent("onblur",o)),p(),c()}();